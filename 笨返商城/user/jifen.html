<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="apple-touch-fullscreen" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black" />
    <title>积分明细</title>
    <link rel="stylesheet" href="../css/reset.css">
    <link rel="stylesheet" href="../css/jifen.css">
    <script type="text/javascript" src="../js/flexible.js" ></script>
    <script src="../js/jquery-1.10.1.min.js"></script>
    
</head>
<body>
    <header>
        <h1>
            <span class="left mui-action-back"></span>积分明细
            <span class="right"><span class="id_1">ID:</span><span class="id">123456789</span></span>
        </h1>
    </header>
    <section class="sec_1">
        <img src="../images/ben_1.png" alt="" class="img_1">
    </section>
    <section class="sec_2">
        <ul class="list_1">
            <li class="jin active">金元</li>
            <li class="yin">银元</li>
            <li class="tong">铜元</li>
        </ul>
        <div class="jin_1 pullrefresh mui-scroll-wrapper">
            <div class="div_1">
                <p class="total_1">
                    <span class="zong">总收入:<span class="total">110.11</span>
                    </span>
                    <a class="chong" href="">提现</a>
                    <a href="" class="ti">充值</a>
                </p>
                <p class="remain_1">
                    <span class="yu">当前余额:<span class="remain">20.11</span>
                    </span>
                    <span class="ke_1">可提金额:<span class="ke">100.00</span>
                    </span>
                </p>
            </div>
            <div class="div_2 mui-scroll">
                <ul class="list_2 mui-table-view">
                    <!--<li class="li_1">
                        <ul class="list_3">
                            <li><span class="type">收支名称:</span><span class="type_1">铜元转金元</span></li>
                            <li><span class="cash">收支金额:</span><span class="cash_1">31.22</span></li>
                            <li><span class="re">当前余额:</span><span class="re_1">12.11</span></li>
                            <li><span class="explain">简单说明:</span><span class="explain_1">签到获得昨天的昨天的转换金元</span></li>
                            <li><span class="time">收支时间:</span><span class="time_1">2017-03-19 17:21</span></li>
                        </ul>
                    </li>
                    <li class="li_1">
                        <ul class="list_3">
                            <li><span class="type">收支名称:</span><span class="type_1">铜元转金元</span></li>
                            <li><span class="cash">收支金额:</span><span class="cash_1">31.22</span></li>
                            <li><span class="re">当前余额:</span><span class="re_1">12.11</span></li>
                            <li><span class="explain">简单说明:</span><span class="explain_1">签到获得昨天的昨天的转换金元</span></li>
                            <li><span class="time">收支时间:</span><span class="time_1">2017-03-19 17:21</span></li>
                        </ul>
                    </li>
                    <li class="li_1">
                        <ul class="list_3">
                            <li><span class="type">收支名称:</span><span class="type_1">铜元转金元</span></li>
                            <li><span class="cash">收支金额:</span><span class="cash_1">31.22</span></li>
                            <li><span class="re">当前余额:</span><span class="re_1">12.11</span></li>
                            <li><span class="explain">简单说明:</span><span class="explain_1">签到获得昨天的昨天的转换金元</span></li>
                            <li><span class="time">收支时间:</span><span class="time_1">2017-03-19 17:21</span></li>
                        </ul>
                    </li>
                     每次加载个，首先进来就加载10条 -->
                </ul>
            </div>
        </div>
        <div class="tong_1 pullrefresh mui-scroll-wrapper">
            <div class="div_1">
                <p class="total_1">
                    <span class="zong">总收入:<span class="total">110.11</span>
                    </span>
                    <a class="chong" href="">提现</a>
                    <a href="" class="ti">充值</a>
                </p>
                <p class="remain_1">
                    <span class="yu">当前余额:<span class="remain">20.11</span>
                    </span>
                    <span class="ke_1">可提金额:<span class="ke">100.00</span>
                    </span>
                </p>
            </div>
            <div class="div_2 mui-scroll">
                <ul class="list_2 mui-table-view">
                    <!--<li class="li_1">
                        <ul class="list_3">
                            <li><span class="type">收支名称:</span><span class="type_1">铜元转金元</span></li>
                            <li><span class="cash">收支金额:</span><span class="cash_1">31.22</span></li>
                            <li><span class="re">当前余额:</span><span class="re_1">12.11</span></li>
                            <li><span class="explain">简单说明:</span><span class="explain_1">签到获得昨天的昨天的转换金元</span></li>
                            <li><span class="time">收支时间:</span><span class="time_1">2017-03-19 17:21</span></li>
                        </ul>
                    </li>
                    <li class="li_1">
                        <ul class="list_3">
                            <li><span class="type">收支名称:</span><span class="type_1">铜元转金元</span></li>
                            <li><span class="cash">收支金额:</span><span class="cash_1">31.22</span></li>
                            <li><span class="re">当前余额:</span><span class="re_1">12.11</span></li>
                            <li><span class="explain">简单说明:</span><span class="explain_1">签到获得昨天的昨天的转换金元</span></li>
                            <li><span class="time">收支时间:</span><span class="time_1">2017-03-19 17:21</span></li>
                        </ul>
                    </li>
                    <li class="li_1">
                        <ul class="list_3">
                            <li><span class="type">收支名称:</span><span class="type_1">铜元转金元</span></li>
                            <li><span class="cash">收支金额:</span><span class="cash_1">31.22</span></li>
                            <li><span class="re">当前余额:</span><span class="re_1">12.11</span></li>
                            <li><span class="explain">简单说明:</span><span class="explain_1">签到获得昨天的昨天的转换金元</span></li>
                            <li><span class="time">收支时间:</span><span class="time_1">2017-03-19 17:21</span></li>
                        </ul>
                    </li>-->
                    <!-- 每次加载个，首先进来就加载10条 -->
                </ul>
            </div>
        </div>
        <div class="yin_1">
            <p>银元暂未开放，尽情期待</p>
        </div>
    </section>
    <script type="text/javascript" src="../js/mui.js" ></script>
    <script type="text/javascript">
    	$(function (){
    		jifen.app.init();
    		jifen.app.tab_1();
		});

		var jifen = {};

		jifen.app = {};


		jifen.app.init = function (){
   		 //此处用首页的session
    	var s = window.localStorage;
    	var m  = JSON.parse(s.getItem('key'));
    	var m_1  = JSON.parse(s.getItem('key_1'));
    	//console.log(m,'\n',m_1);

    	//此处发ajax，并且申请十条数据
    	var k = [
        	[{'yu':200.13},
        	{'ke':123.23}],
        	[{'yu':201.43},
         	{'ke':124.23}]
    		];
   		var l = [
        [{  'name':'铜元转金元',
            'cash':33.55,
            'remain':23.85,
            'explain':'签到获得昨天的转换金元',
            'time':'2017-02-15 17:21'
        }],
        [{  'name':'铜元转金元',
            'cash':33.55,
            'remain':28.05,
            'explain':'签到获得昨天的转换金元',
            'time':'2017-01-15 17:21'
        }],
        [{  'name':'铜元转金元',
            'cash':43.55,
            'remain':53.85,
            'explain':'签到获得昨天的转换金元',
            'time':'2017-02-15 17:21'
        }],
        [{  'name':'铜元转金元',
            'cash':33.55,
            'remain':23.85,
            'explain':'签到获得昨天的转换金元',
            'time':'2017-02-15 17:21'
        }],
        [{  'name':'铜元转金元',
            'cash':33.55,
            'remain':23.85,
            'explain':'签到获得昨天的转换金元',
            'time':'2017-02-15 17:21'
        }],
        [{  'name':'铜元转金元',
            'cash':13.55,
            'remain':33.85,
            'explain':'签到获得昨天的转换金元',
            'time':'2017-03-15 17:21'
        }],
        [{  'name':'铜元转金元',
            'cash':31.55,
            'remain':23.15,
            'explain':'签到获得昨天的转换金元',
            'time':'2017-01-15 13:21'
        }],
        [{  'name':'铜元转金元',
            'cash':13.55,
            'remain':13.85,
            'explain':'签到获得昨天的转换金元',
            'time':'2017-02-15 12:21'
        }],
        [{  'name':'铜元转金元',
            'cash':13.55,
            'remain':13.85,
            'explain':'签到获得昨天的转换金元',
            'time':'2017-02-15 17:21'
        }],
        [{  'name':'铜元转金元',
            'cash':13.55,
            'remain':23.85,
            'explain':'签到获得昨天的转换金元',
            'time':'2017-02-18 17:21'
        }]
    ];
    	s.setItem('key_2', JSON.stringify(k));
    	s.setItem('key_3', JSON.stringify(l));
    	var k_2 = JSON.parse(s.getItem('key_2'));
    	var k_3 = JSON.parse(s.getItem('key_3'));
		//console.log(k_3.length);
		
		mui.init({
				pullRefresh: {
					container: '.pullrefresh',
					up: {
						contentrefresh: '正在加载...',
						callback: pullupRefresh
					}
				}
			});
    	mui.plusReady(function (){
    		$('header .id').html(m[2].id);
        	$('.sec_2 .jin_1 .total').html(m_1[0].g);
        	$('.sec_2 .jin_1 .remain').html(k_2[0][0].yu);
        	$('.sec_2 .jin_1 .ke').html(k_2[0][1].ke);
        	$('.sec_2 .tong_1 .total').html(m_1[1].s);
        	$('.sec_2 .jin_1 .total').html(m_1[0].g);
        	$('.sec_2 .tong_1 .remain').html(k_2[1][1].yu);
        	$('.sec_2 .tong_1 .ke').html(k_2[1][1].ke);
        	/*$('.sec_2 .jin_1 .list_2').html(function (){
           	 	for(var i=0;i<k_3.length;i++){
                	$(this).append('<li class="li_1"><ul class="list_3"><li><span class="type">收支名称:</span><span class="type_1">'+k_3[i][0].name+'</span></li><li><span class="cash">收支金额:</span><span class="cash_1">'+k_3[i][0].cash+'</span></li><li><span class="re">当前余额:</span><span class="re_1">'+k_3[i][0].remain+'</span></li><li><span class="explain">简单说明:</span><span class="explain_1">'+k_3[i][0].explain+'</span></li><li><span class="time">收支时间:</span><span class="time_1">'+k_3[i][0].time+'</span></li></ul></li>');
            }
        });*/
        /*$('.sec_2 .tong_1 .list_2').html(function (){
            for(var i=0;i<k_3.length;i++){
                $(this).append('<li class="li_1"><ul class="list_3"><li><span class="type">收支名称:</span><span class="type_1">'+k_3[i][0].name+'</span></li><li><span class="cash">收支金额:</span><span class="cash_1">'+k_3[i][0].cash+'</span></li><li><span class="re">当前余额:</span><span class="re_1">'+k_3[i][0].remain+'</span></li><li><span class="explain">简单说明:</span><span class="explain_1">'+k_3[i][0].explain+'</span></li><li><span class="time">收支时间:</span><span class="time_1">'+k_3[i][0].time+'</span></li></ul></li>');
            	}
        	});*/
        	
        	/*setTimeout(function() {
					mui('.pullrefresh').pullRefresh().pullupLoading();
				}, 1000);*/
    	});
    	var count = 0;
    	function pullup_Refresh() {
				setTimeout(function() {
					$('.sec_2 list_1 li').each(function (){
						var m = '';
						if($(this).classList.contains('jin')){
							url = 'http://www.baidu.com?'+'jin';
							m = 'jin_1';
							plus.nativeUI.alert(url);
						}
						else if($(this).classList.contains('tong')){
							url = 'http://www.baidu.com?'+'yin';
							m = 'tong_1';
							plus.nativeUI.alert(url);
						}
					});
					
					mui('.pullrefresh').pullRefresh().endPullupToRefresh((++count > k_3.length));
					$('.sec_2 "'+m+'" .list_2').html(function (){
           	 	for(var i=0;i<k_3.length;i++){
                	$(this).append('<li class="li_1"><ul class="list_3"><li><span class="type">收支名称:</span><span class="type_1">'+k_3[i][0].name+'</span></li><li><span class="cash">收支金额:</span><span class="cash_1">'+k_3[i][0].cash+'</span></li><li><span class="re">当前余额:</span><span class="re_1">'+k_3[i][0].remain+'</span></li><li><span class="explain">简单说明:</span><span class="explain_1">'+k_3[i][0].explain+'</span></li><li><span class="time">收支时间:</span><span class="time_1">'+k_3[i][0].time+'</span></li></ul></li>');
            }
        });
					/*mui.ajax(url,{
						data:{
							
						},
						dataType:'json',//服务器返回json格式数据
						type:'post',//HTTP请求类型
						timeout:10000,//超时时间设置为10秒；
						success:function(data){
							
							
						},
						error:function(xhr,type,errorThrown){
							plus.nativeUI.alert(url);
							$('.sec_2 "'+m+'" .list_2').html(function (){
           	 	for(var i=0;i<k_3.length;i++){
                	$(this).append('<li class="li_1"><ul class="list_3"><li><span class="type">收支名称:</span><span class="type_1">'+k_3[i][0].name+'</span></li><li><span class="cash">收支金额:</span><span class="cash_1">'+k_3[i][0].cash+'</span></li><li><span class="re">当前余额:</span><span class="re_1">'+k_3[i][0].remain+'</span></li><li><span class="explain">简单说明:</span><span class="explain_1">'+k_3[i][0].explain+'</span></li><li><span class="time">收支时间:</span><span class="time_1">'+k_3[i][0].time+'</span></li></ul></li>');
            }
        });
						}
					});*/
					
					/*mui('.pullrefresh').pullRefresh().endPullupToRefresh(true); //参数为true代表没有更多数据了。
					mui('.pullrefresh').pullRefresh().disablePullupToRefresh();*/
				}, 1500);
		}
    	
    	function pullupRefresh() {
				setTimeout(function() {
					mui('.pullrefresh').pullRefresh().endPullupToRefresh((++count > 2)); //参数为true代表没有更多数据了。
					var table = document.body.querySelector('.mui-table-view');
					var cells = document.body.querySelectorAll('.mui-table-view-cell');
					for (var i = cells.length, len = i + 20; i < len; i++) {
						var li = document.createElement('li');
						li.className = 'mui-table-view-cell';
						li.innerHTML = '<a class="mui-navigate-right">Item ' + (i + 1) + '</a>';
						table.appendChild(li);
					}
				}, 1500);
			}
		if (mui.os.plus) {
			mui.plusReady(function() {
				setTimeout(function() {
					mui('.pullrefresh').pullRefresh().pullupLoading();
				}, 1000);

			});
		}
		else{
			mui.ready(function() {
				mui('.pullrefresh').pullRefresh().pullupLoading();
			});
		}
	};
	jifen.app.tab_1 = function (){
   	 	$('.sec_2 .list_1 .jin').on('touchstart', function (){
        	$(this).addClass('active').siblings().removeClass('active');
        	$('.jin_1').css('display','block');
        	$('.tong_1').css('display','none');
        	$('.yin_1').css('display','none');
    	});
    	$('.sec_2 .list_1 .tong').on('touchstart', function (){
        	$(this).addClass('active').siblings().removeClass('active');
        	$('.jin_1').css('display','none');
        	$('.yin_1').css('display','none');
        	$('.tong_1').css('display','block');
    	});
    	$('.sec_2 .list_1 .yin').on('touchstart', function (){
        	$(this).addClass('active').siblings().removeClass('active');
        	$('.jin_1').css('display','none');
        	$('.yin_1').css('display','block');
        	$('.tong_1').css('display','none');
    	});
	};
    </script>
</body>
</html>